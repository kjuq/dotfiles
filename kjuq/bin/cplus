#!/usr/bin/env bash

output="/tmp/cplus_output"

debug_opts="-D_GLIBCXX_DEBUG -D_GLIBCXX_DEBUG_PEDANTIC"

while getopts "t" opt; do
	case "$opt" in
	t) # traceback
		debug_opts=""
		shift 1
		;;
	esac
done

# echo "$@"
g++-14 -std=c++23 -Wall -Wextra -g -fsanitize=address,undefined $debug_opts -o "$output" "$@" && "$output"
command rm "$output"
